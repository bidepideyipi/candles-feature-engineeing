{
  "database": "technical_analysis",
  "collection": "candlesticks",
  "queries": [
    {
      "name": "Get all candlesticks ordered by timestamp with formatted date",
      "description": "Retrieve all candlestick data sorted by timestamp ascending, with timestamp converted to yyyy-MM-dd HH:mm format",
      "command": "db.candlesticks.aggregate([\n  {\n    $sort: { timestamp: 1 }\n  },\n  {\n    $project: {\n      _id: 0,\n      timestamp: 1,\n      formatted_timestamp: {\n        $dateToString: {\n          format: \"%Y-%m-%d %H:%M\",\n          date: {\n            $toDate: \"$timestamp\"\n          }\n        }\n      },\n      open: 1,\n      high: 1,\n      low: 1,\n      close: 1,\n      volume: 1,\n      vol_ccy: 1,\n      vol_ccy_quote: 1,\n      confirm: 1\n    }\n  }\n])"
    },
    {
      "name": "Get recent candlesticks with formatted date",
      "description": "Retrieve last 100 candlesticks with formatted timestamp",
      "command": "db.candlesticks.aggregate([\n  {\n    $sort: { timestamp: -1 }\n  },\n  {\n    $limit: 100\n  },\n  {\n    $sort: { timestamp: 1 }\n  },\n  {\n    $project: {\n      _id: 0,\n      timestamp: 1,\n      formatted_timestamp: {\n        $dateToString: {\n          format: \"%Y-%m-%d %H:%M\",\n          date: {\n            $toDate: \"$timestamp\"\n          }\n        }\n      },\n      open: 1,\n      high: 1,\n      low: 1,\n      close: 1,\n      volume: 1,\n      vol_ccy: 1,\n      vol_ccy_quote: 1,\n      confirm: 1\n    }\n  }\n])"
    },
    {
      "name": "Get candlesticks within date range",
      "description": "Retrieve candlesticks between specific dates with formatted timestamp",
      "command": "db.candlesticks.aggregate([\n  {\n    $match: {\n      timestamp: {\n        $gte: new Date(\"2024-01-01\").getTime(),\n        $lte: new Date(\"2024-12-31\").getTime()\n      }\n    }\n  },\n  {\n    $sort: { timestamp: 1 }\n  },\n  {\n    $project: {\n      _id: 0,\n      timestamp: 1,\n      formatted_timestamp: {\n        $dateToString: {\n          format: \"%Y-%m-%d %H:%M\",\n          date: {\n            $toDate: \"$timestamp\"\n          }\n        }\n      },\n      open: 1,\n      high: 1,\n      low: 1,\n      close: 1,\n      volume: 1,\n      vol_ccy: 1,\n      vol_ccy_quote: 1,\n      confirm: 1\n    }\n  }\n])"
    },
    {
      "name": "Get latest candlestick with formatted date",
      "description": "Retrieve the most recent candlestick record with formatted timestamp",
      "command": "db.candlesticks.aggregate([\n  {\n    $sort: { timestamp: -1 }\n  },\n  {\n    $limit: 1\n  },\n  {\n    $project: {\n      _id: 0,\n      timestamp: 1,\n      formatted_timestamp: {\n        $dateToString: {\n          format: \"%Y-%m-%d %H:%M\",\n          date: {\n            $toDate: \"$timestamp\"\n          }\n        }\n      },\n      open: 1,\n      high: 1,\n      low: 1,\n      close: 1,\n      volume: 1,\n      vol_ccy: 1,\n      vol_ccy_quote: 1,\n      confirm: 1\n    }\n  }\n])"
    },
    {
      "name": "Simple find with sort and projection",
      "description": "Alternative approach using find() with sort and projection",
      "command": "db.candlesticks.find(\n  {},\n  {\n    _id: 0,\n    timestamp: 1,\n    open: 1,\n    high: 1,\n    low: 1,\n    close: 1,\n    volume: 1,\n    vol_ccy: 1,\n    vol_ccy_quote: 1,\n    confirm: 1\n  }\n).sort({ timestamp: 1 })"
    }
  ],
  "usage_examples": [
    {
      "scenario": "Connect to MongoDB and use the database",
      "commands": [
        "mongo",
        "use technical_analysis"
      ]
    },
    {
      "scenario": "Check collection structure",
      "command": "db.candlesticks.findOne()"
    },
    {
      "scenario": "Count total records",
      "command": "db.candlesticks.count()"
    }
  ]
}